h1. spf_codemirror

p. A syntax-highlighting plugin for "Textpattern":http://textpattern.com admin - now with "Zen Coding/Emmet":http://code.google.com/p/zen-coding (HTML & CSS).

p. Preferences can now be set for theme, font-size and full-screen hot-keys.


h2. Background

p. This was a quick update to Dale Chapman's "mrd_codeMirror":http://forum.textpattern.com/viewtopic.php?id=38015 which, in turn, was prompted by my "CodeMirror admin theme":http://forum.textpattern.com/viewtopic.php?id=37957 and, of course, Marijn Haverbeke's "CodeMirror":http://codemirror.net. Now with "Zen Coding":http://code.google.com/p/zen-coding goodness thrown in.

p. Thanks to Marijn, Sergey and Dale.


h2. Features

# Adds "CodeMirror":http://codemirror.net syntax-highlighting to textareas in Textpattern's Forms, Pages and Style tabs;
# Also to JavaScript tab ("spf_js":http://forum.textpattern.com/viewtopic.php?id=37849 required) and External Files tab ("spf_ext":http://forum.textpattern.com/viewtopic.php?id=38032 required);
# Basic preferences via Admin > Preferences > Advanced;
# HTML/CSS shorthand/code-completion now added to Pages, Forms & CSS  courtesy of "Zen Coding/Emmet":http://code.google.com/p/zen-coding.


h2. Installation

# "DOWNLOAD":https://github.com/spiffin/spf_codemirror/zipball/master and unzip;
# Upload the containing 'codemirror' directory to your web root:
** *codemirror*
** css.php
** files
** images
** index.php
** rpc
** sites
** textpattern
# Install and activate the plugin (spf_codemirror.txt - inside the unzipped folder).
# NOTE: the folder structure mirrors that of a standard CodeMirror download (just the 'lib', 'mode' and 'theme' directories) with the addition of the minified emmet.min.js file from Emmet-CodeMirror2 - for easy upgrade.

h2. Upgrade to a newer version of CodeMirror

# You can now easily upgrade CodeMirror (2.35 as of Nov 2012).
# "Download the latest release":http://codemirror.net/codemirror.zip.
# Unzip the download and upload the containing 'lib', 'mode' and 'theme' directories to the codemirror directory on your web server.
# To upgrade Emmet (Zen Coding) download 'Emmet-CodeMirror2' "from here":https://github.com/sergeche/zen-coding/downloads, unzip it and upload the containing 'emmet.min.js' file to your codemirror directory.

h2. Minify support

# If you have "Minify":http://code.google.com/p/minify/ on your web server in the standard DOCUMENT_ROOT/min location, spf_codemirror will use it to minify css & js - if you don't, it won't.

h2. Zen Coding notes:

# Initiate completion by hitting TAB (or Cmd+E).
# Try typing this: @div#page>div.logo+ul#navigation>li*5>a@ and then TAB.
# Works with opening and closing txp tags (try typing @txp:if_section@ and then TAB).
# CSS shortcuts work even better with Emmet* - try typing m and then TAB in Styles.
*Emmet is the new name for Zen Coding.


h2. Notes & issues

# Basic preferences (theme, font-size, full-screen hot-keys) are available via Admin > Preferences > Advanced.
# Textarea resizing is disabled (enabling gives erratic results);
# Plugins editor not supported;
# Code-folding requires input to the Javascript (which lines to fold) and is therefore disabled;


h2. Version history

0.61 - November 2012
* Fixed Minify issue with 'public' and 'private' URLs ('ihu' v 'hu').

0.6 - November 2012
* Re-written for Textpattern 4.5.1.
* Upgraded to CodeMirror 2.35 and Emmet.
* Full-screen support - hit F5 (and Esc to exit).
* Basic preferences via Admin > Preferences > Advanced.
* CodeMirror folder structure now mirrors standard CodeMirror for easy upgrades.
* Automatic Minify support.

0.5 - May 2012
* CSS support for Zen Coding within style tags.

0.4 - May 2012
* Added code block indicators: @spf_codemirror START/END@.
* Code cleanup.

0.3 - May 2012
* Added Zen Coding code completion to Pages and Forms (HTML).
* Upgraded to CodeMirror 2.25.

0.2 - May 2012
* Changed load order (to allow interaction with other plugins).

0.1 - May 2012
* first release.