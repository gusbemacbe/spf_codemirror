# spf_codemirror v0.2
# CodeMirror syntax-highlighting in pages, forms, css, JavaScript and external files
# Simon Finch
# https://github.com/spiffin/spf_codemirror

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE0OiJzcGZfY29kZW1pcnJvciI7czo3OiJ2ZXJzaW9uIjtz
OjM6IjAuMiI7czo2OiJhdXRob3IiO3M6MTE6IlNpbW9uIEZpbmNoIjtzOjEwOiJhdXRob3Jf
dXJpIjtzOjQxOiJodHRwczovL2dpdGh1Yi5jb20vc3BpZmZpbi9zcGZfY29kZW1pcnJvciI7
czoxMToiZGVzY3JpcHRpb24iO3M6ODI6IkNvZGVNaXJyb3Igc3ludGF4LWhpZ2hsaWdodGlu
ZyBpbiBwYWdlcywgZm9ybXMsIGNzcywgSmF2YVNjcmlwdCBhbmQgZXh0ZXJuYWwgZmlsZXMi
O3M6NToib3JkZXIiO3M6MToiOSI7czo0OiJ0eXBlIjtzOjE6IjMiO3M6NToiZmxhZ3MiO3M6
MToiMCI7czo0OiJoZWxwIjtzOjE5OTg6IjxoMT5zcGZfY29kZW1pcnJvcjwvaDE+Cgo8cD5B
IHN5bnRheC1oaWdobGlnaHRpbmcgcGx1Z2luIGZvciBUZXh0cGF0dGVybiBhZG1pbi48L3A+
Cgo8aDI+QmFja2dyb3VuZDo8L2gyPgoKPHA+VGhpcyBpcyBhIHF1aWNrIHVwZGF0ZSB0byBE
YWxlIENoYXBtYW7igJlzIDxhIGhyZWY9Imh0dHA6Ly9mb3J1bS50ZXh0cGF0dGVybi5jb20v
dmlld3RvcGljLnBocD9pZD0zODAxNSI+bXJkX2NvZGVNaXJyb3I8L2E+IHdoaWNoLCBpbiB0
dXJuLCB3YXMgcHJvbXB0ZWQgYnkgbXkgPGEgaHJlZj0iaHR0cDovL2ZvcnVtLnRleHRwYXR0
ZXJuLmNvbS92aWV3dG9waWMucGhwP2lkPTM3OTU3Ij5Db2RlTWlycm9yIGFkbWluIHRoZW1l
PC9hPiBhbmQsIG9mIGNvdXJzZSwgTWFyaWpuIEhhdmVyYmVrZeKAmXMgPGEgaHJlZj0iaHR0
cDovL2NvZGVtaXJyb3IubmV0Ij5Db2RlTWlycm9yPC9hPi48L3A+CjxwPlRoYW5rcyB0byBE
YWxlIGFuZCBNYXJpam4uPC9wPgoKCjxoMj5GZWF0dXJlczo8L2gyPgo8b2w+CjxsaT5BZGRz
IDxhIGhyZWY9Imh0dHA6Ly9jb2RlbWlycm9yLm5ldCI+Q29kZU1pcnJvcjwvYT4gc3ludGF4
LWhpZ2hsaWdodGluZyB0byB0ZXh0YXJlYXMgaW4gVGV4dHBhdHRlcm7igJlzIEZvcm1zLCBQ
YWdlcyBhbmQgU3R5bGUgdGFiczs8L2xpPgo8bGk+QWxzbyB0byBKYXZhU2NyaXB0IHRhYiAo
PGEgaHJlZj0iaHR0cDovL2ZvcnVtLnRleHRwYXR0ZXJuLmNvbS92aWV3dG9waWMucGhwP2lk
PTM3ODQ5Ij5zcGZfanM8L2E+IHJlcXVpcmVkKSBhbmQgRXh0ZXJuYWwgRmlsZXMgdGFiICg8
YSBocmVmPSJodHRwOi8vZm9ydW0udGV4dHBhdHRlcm4uY29tL3ZpZXd0b3BpYy5waHA/aWQ9
MzgwMzIiPnNwZl9leHQ8L2E+IHJlcXVpcmVkKTs8L2xpPgo8bGk+VGhlbWUgc2VsZWN0b3Iu
PC9saT4KPC9vbD4KCgo8aDI+SW5zdGFsbGF0aW9uOjwvaDI+CjxvbD4KPGxpPjxhIGhyZWY9
Imh0dHBzOi8vZ2l0aHViLmNvbS9zcGlmZmluL3NwZl9jb2RlbWlycm9yL3ppcGJhbGwvbWFz
dGVyIj5ET1dOTE9BRDwvYT4gYW5kIHVuemlwOzwvbGk+CjxsaT5VcGxvYWQgdGhlIGNvbnRh
aW5pbmcg4oCYY29kZW1pcnJvcuKAmSBkaXJlY3RvcnkgdG8geW91ciB3ZWIgcm9vdDs8L2xp
Pgo8bGk+SW5zdGFsbCBhbmQgYWN0aXZhdGUgdGhlIHBsdWdpbiAoc3BmX2NvZGVtaXJyb3Iu
dHh0IC0gaW5zaWRlIHRoZSB1bnppcHBlZCBmb2xkZXIpLjwvbGk+Cjwvb2w+CgoKPGgyPk5v
dGVzICZhbXA7IGlzc3Vlczo8L2gyPgo8b2w+CjxsaT5JbmNsdWRlZCAuanMgYW5kIC5jc3Mg
ZmlsZXMgaGF2ZSBiZWVuIGNvbWJpbmVkIGFuZCBtaW5pZmllZCAob3JpZ2luYWwgZmlsZW5h
bWVzIGFyZSByZWZlcmVuY2VkIGluIGhlYWRlcik7PC9saT4KPGxpPlJlbW9yYSBkcm9wLWRv
d24gbWVudXMgYXJlIHN0aWxsIGhpZGRlbiBiZWhpbmQgdGhlIHRleHRhcmVhOzwvbGk+Cjxs
aT5UZXh0YXJlYSByZXNpemluZyBpcyBkaXNhYmxlZCAoZW5hYmxpbmcgZ2l2ZXMgZXJyYXRp
YyByZXN1bHRzKTs8L2xpPgo8bGk+UGx1Z2lucyBlZGl0b3Igbm90IHN1cHBvcnRlZDs8L2xp
Pgo8bGk+Q29kZS1mb2xkaW5nIHJlcXVpcmVzIGlucHV0IHRvIHRoZSBKYXZhc2NyaXB0ICh3
aGljaCBsaW5lcyB0byBmb2xkKSBhbmQgaXMgdGhlcmVmb3JlIGRpc2FibGVkOzwvbGk+Cjxs
aT5UaGVtZSBzZWxlY3RvciBpcyBib3R0b20tcmlnaHQ6IG5vdCB0aGUgbW9zdCBlbGVnYW50
IHNvbHV0aW9uIGJ1dCB3b3JrcyBjb25zaXN0ZW50bHkgYWNyb3NzIG1vc3QgYWRtaW4gdGhl
bWVzIChzcGVjaWZpY2FsbHkgQ2xhc3NpYywgSGl2ZSwgU3RlZWwpLjwvbGk+Cjwvb2w+CgoK
PGgyPlZlcnNpb24gaGlzdG9yeTo8L2gyPgo8cD4wLjIgLSBNYXkgMjAxMjwvcD4KPHVsPgo8
bGk+Q2hhbmdlZCBsb2FkIG9yZGVyICh0byBhbGxvdyBpbnRlcmFjdGlvbiB3aXRoIG90aGVy
IHBsdWdpbnMpLjwvbGk+CjwvdWw+Cgo8cD4wLjEgLSBNYXkgMjAxMjwvcD4KPHVsPgo8bGk+
Zmlyc3QgcmVsZWFzZS48L2xpPgo8L3VsPiI7czo0OiJjb2RlIjtzOjQwODU6Ii8qKgogKiBz
cGZfY29kZW1pcnJvciAtIENvZGVNaXJyb3Igc3ludGF4LWhpZ2hsaWdodGluZyBmb3IgVGV4
dHBhdHRlcm4KICoKICogwqkgMjAxMiBTaW1vbiBGaW5jaCAtIGh0dHBzOi8vZ2l0aHViLmNv
bS9zcGlmZmluL3NwZl9jb2RlbWlycm9yCiAqCiAqIExpY2Vuc2VkIHVuZGVyIEdOVSBHZW5l
cmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMgogKiBodHRwOi8vd3d3LmdudS5vcmcvbGlj
ZW5zZXMvZ3BsLTIuMC5odG1sCiAqCiAqIGEgcXVpY2sgdXBkYXRlIHRvIG1yZF9jb2RlTWly
cm9yIC0gdGhhbmtzIERhbGUKICoKICogVmVyc2lvbiAwLjIgLS0gMTkgTWF5IDIwMTIKICov
CgppZiAoQHR4cGludGVyZmFjZSA9PSAnYWRtaW4nKSB7CiAgICByZWdpc3Rlcl9jYWxsYmFj
aygnc3BmX3RleHRhcmVhX3BhZ2UnLCAncGFnZScpOwogICAgcmVnaXN0ZXJfY2FsbGJhY2so
J3NwZl90ZXh0YXJlYV9mb3JtJywgJ2Zvcm0nKTsKICAgIHJlZ2lzdGVyX2NhbGxiYWNrKCdz
cGZfdGV4dGFyZWFfY3NzJywgJ2NzcycpOwogICAgcmVnaXN0ZXJfY2FsbGJhY2soJ3NwZl90
ZXh0YXJlYV9qcycsICdzcGZfanMnKTsKICAgIHJlZ2lzdGVyX2NhbGxiYWNrKCdzcGZfdGV4
dGFyZWFfZXh0JywgJ3NwZl9leHQnKTsKfQoKZnVuY3Rpb24gc3BmX3RleHRhcmVhX3BhZ2Uo
JGV2ZW50LCAkc3RlcCkgewpzcGZfY29kZW1pcnJvcl90aGVtZV9zZWxlY3QoKTsKc3BmX3Rl
eHRhcmVhX2NvbW1vbigpOwokanMgPSAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQi
IHNyYz0iL2NvZGVtaXJyb3IvY21faHRtbG1peGVkX21pbi5qcyI+PC9zY3JpcHQ+JzsKJGpz
IC49ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+JzsKCiRqcyAuPSA8PDxFT0YK
dmFyIGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1l
bnRCeUlkKCJodG1sIiksIHsKICAgIG1vZGU6ICJ0ZXh0L2h0bWwiLAogICAgdGFiTW9kZTog
ImluZGVudCIsCiAgICBsaW5lV3JhcHBpbmc6IHRydWUsCiAgICBsaW5lTnVtYmVyczogdHJ1
ZSwKICAgIGV4dHJhS2V5czogewogICAgIic+JyI6IGZ1bmN0aW9uKGNtKSB7IGNtLmNsb3Nl
VGFnKGNtLCAnPicpOyB9LAogICAgIicvJyI6IGZ1bmN0aW9uKGNtKSB7IGNtLmNsb3NlVGFn
KGNtLCAnLycpOyB9CiAgICB9LAogICAgdGhlbWU6ICJhbWJpYW5jZSIKfSk7CkVPRjsKCiRq
cyAuPSAnPC9zY3JpcHQ+JzsKCmVjaG8gJGpzOwp9CgpmdW5jdGlvbiBzcGZfdGV4dGFyZWFf
Zm9ybSgkZXZlbnQsICRzdGVwKSB7CnNwZl9jb2RlbWlycm9yX3RoZW1lX3NlbGVjdCgpOwpz
cGZfdGV4dGFyZWFfY29tbW9uKCk7CiRqcyA9ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNj
cmlwdCIgc3JjPSIvY29kZW1pcnJvci9jbV9odG1sbWl4ZWRfbWluLmpzIj48L3NjcmlwdD4n
OwokanMgLj0gJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4nOwoKJGpzIC49IDw8
PEVPRgp2YXIgZWRpdG9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0
RWxlbWVudEJ5SWQoImZvcm0iKSwgewogICAgbW9kZTogInRleHQvaHRtbCIsCiAgICB0YWJN
b2RlOiAiaW5kZW50IiwKICAgIGxpbmVXcmFwcGluZzogdHJ1ZSwKICAgIGxpbmVOdW1iZXJz
OiB0cnVlLAogICAgZXh0cmFLZXlzOiB7CiAgICAiJz4nIjogZnVuY3Rpb24oY20pIHsgY20u
Y2xvc2VUYWcoY20sICc+Jyk7IH0sCiAgICAiJy8nIjogZnVuY3Rpb24oY20pIHsgY20uY2xv
c2VUYWcoY20sICcvJyk7IH0KICAgIH0sCiAgICB0aGVtZTogImFtYmlhbmNlIgp9KTsKRU9G
OwoKJGpzIC49ICc8L3NjcmlwdD4nOwoKZWNobyAkanM7Cn0KCmZ1bmN0aW9uIHNwZl90ZXh0
YXJlYV9jc3MoJGV2ZW50LCAkc3RlcCkgewpzcGZfY29kZW1pcnJvcl90aGVtZV9zZWxlY3Qo
KTsKc3BmX3RleHRhcmVhX2NvbW1vbigpOwokanMgPSAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2ph
dmFzY3JpcHQiIHNyYz0iL2NvZGVtaXJyb3IvY21fY3NzX21pbi5qcyI+PC9zY3JpcHQ+JzsK
JGpzIC49ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+JzsKCiRqcyAuPSA8PDxF
T0YKdmFyIGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVs
ZW1lbnRCeUlkKCJjc3MiKSwgewogICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgbGluZU51
bWJlcnMgOiB0cnVlLAogICAgbWF0Y2hCcmFja2V0cyA6IHRydWUsCiAgICB0aGVtZTogImFt
YmlhbmNlIgp9KTsKRU9GOwoKJGpzIC49ICc8L3NjcmlwdD4nOwoKZWNobyAkanM7Cn0KCmZ1
bmN0aW9uIHNwZl90ZXh0YXJlYV9qcygkZXZlbnQsICRzdGVwKSB7CnNwZl9jb2RlbWlycm9y
X3RoZW1lX3NlbGVjdCgpOwpzcGZfdGV4dGFyZWFfY29tbW9uKCk7CiRqcyA9ICc8c2NyaXB0
IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvY29kZW1pcnJvci9jbV9qYXZhc2NyaXB0
X21pbi5qcyI+PC9zY3JpcHQ+JzsKJGpzIC49ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNj
cmlwdCI+JzsKCiRqcyAuPSA8PDxFT0YKdmFyIGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRl
eHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGZfanMiKSwgewogICAgbGluZVdy
YXBwaW5nOiB0cnVlLAogICAgbGluZU51bWJlcnM6IHRydWUsCiAgICBtYXRjaEJyYWNrZXRz
OiB0cnVlLAogICAgdGhlbWU6ICJhbWJpYW5jZSIKfSk7CkVPRjsKCiRqcyAuPSAnPC9zY3Jp
cHQ+JzsKCmVjaG8gJGpzOwp9CgpmdW5jdGlvbiBzcGZfdGV4dGFyZWFfZXh0KCRldmVudCwg
JHN0ZXApIHsKc3BmX2NvZGVtaXJyb3JfdGhlbWVfc2VsZWN0KCk7CnNwZl90ZXh0YXJlYV9j
b21tb24oKTsKJGpzID0gJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9j
b2RlbWlycm9yL2NtX3BocF9taW4uanMiPjwvc2NyaXB0Pic7CiRqcyAuPSAnPHNjcmlwdCB0
eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPic7CgokanMgLj0gPDw8RU9GCnZhciBlZGl0b3IgPSBD
b2RlTWlycm9yLmZyb21UZXh0QXJlYShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3BmX2V4
dCIpLCB7CiAgICBsaW5lV3JhcHBpbmc6IHRydWUsCiAgICBsaW5lTnVtYmVyczogdHJ1ZSwK
ICAgIG1hdGNoQnJhY2tldHM6IHRydWUsCiAgICBtb2RlOiAiYXBwbGljYXRpb24veC1odHRw
ZC1waHAiLAogICAgaW5kZW50VW5pdDogNCwKICAgIGluZGVudFdpdGhUYWJzOiB0cnVlLAog
ICAgZW50ZXJNb2RlOiAia2VlcCIsCiAgICB0YWJNb2RlOiAic2hpZnQiLAogICAgdGhlbWU6
ICJhbWJpYW5jZSIKfSk7CkVPRjsKCiRqcyAuPSAnPC9zY3JpcHQ+JzsKCmVjaG8gJGpzOwp9
CgpmdW5jdGlvbiBzcGZfdGV4dGFyZWFfY29tbW9uKCkgewokY20gPSAnPGxpbmsgaHJlZj0i
L2NvZGVtaXJyb3IvY21fY29tYmluZWRfbWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0IiB0eXBl
PSJ0ZXh0L2NzcyIgLz4KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9
Ii9jb2RlbWlycm9yL2NtX3RoZW1lX3NlbGVjdF9taW4uanMiPjwvc2NyaXB0Pic7CgplY2hv
ICRjbTsKfQoKZnVuY3Rpb24gc3BmX2NvZGVtaXJyb3JfdGhlbWVfc2VsZWN0KCkgewokc2Vs
ZWN0ID0gJzxwIHN0eWxlPSJwb3NpdGlvbjpmaXhlZDtyaWdodDoyMHB4O2JvdHRvbToyMHB4
Ij5Db2RlTWlycm9yIHRoZW1lOiA8c2VsZWN0IG9uY2hhbmdlPSJzZWxlY3RUaGVtZSgpIiBp
ZD0ic2VsZWN0Ij4KICAgIDxvcHRpb24+ZGVmYXVsdDwvb3B0aW9uPgogICAgPG9wdGlvbiBz
ZWxlY3RlZD5hbWJpYW5jZTwvb3B0aW9uPgogICAgPG9wdGlvbj5ibGFja2JvYXJkPC9vcHRp
b24+CiAgICA8b3B0aW9uPmNvYmFsdDwvb3B0aW9uPgogICAgPG9wdGlvbj5lY2xpcHNlPC9v
cHRpb24+CiAgICA8b3B0aW9uPmVsZWdhbnQ8L29wdGlvbj4KICAgIDxvcHRpb24+bGVzc2Vy
LWRhcms8L29wdGlvbj4KICAgIDxvcHRpb24+bW9ub2thaTwvb3B0aW9uPgogICAgPG9wdGlv
bj5uZWF0PC9vcHRpb24+CiAgICA8b3B0aW9uPm5pZ2h0PC9vcHRpb24+CiAgICA8b3B0aW9u
PnJ1YnlibHVlPC9vcHRpb24+CiAgICA8b3B0aW9uPnhxLWRhcms8L29wdGlvbj4KPC9zZWxl
Y3Q+CjwvcD4nOwoKZWNobyAkc2VsZWN0Owp9IjtzOjM6Im1kNSI7czozMjoiN2NhZjY1ODM3
ZWY2OWNiMzI2MWE1OWNhOGEwYTJhNDEiO30=