# spf_codemirror v0.1
# CodeMirror syntax-highlighting in pages, forms, css, JavaScript and external files
# Simon Finch
# https://github.com/spiffin/spf_codemirror

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE0OiJzcGZfY29kZW1pcnJvciI7czo3OiJ2ZXJzaW9uIjtz
OjM6IjAuMSI7czo2OiJhdXRob3IiO3M6MTE6IlNpbW9uIEZpbmNoIjtzOjEwOiJhdXRob3Jf
dXJpIjtzOjQxOiJodHRwczovL2dpdGh1Yi5jb20vc3BpZmZpbi9zcGZfY29kZW1pcnJvciI7
czoxMToiZGVzY3JpcHRpb24iO3M6ODI6IkNvZGVNaXJyb3Igc3ludGF4LWhpZ2hsaWdodGlu
ZyBpbiBwYWdlcywgZm9ybXMsIGNzcywgSmF2YVNjcmlwdCBhbmQgZXh0ZXJuYWwgZmlsZXMi
O3M6NToib3JkZXIiO3M6MToiNSI7czo0OiJ0eXBlIjtzOjE6IjMiO3M6NToiZmxhZ3MiO3M6
MToiMCI7czo0OiJoZWxwIjtzOjEyOTg6IjxoMT5zcGZfY29kZW1pcnJvcjwvaDE+Cgo8aDM+
QmFja2dyb3VuZDwvaDM+CjxwPlRoaXMgaXMgYSBxdWljayB1cGRhdGUgdG8gPGEgaHJlZj0i
aHR0cDovL2ZvcnVtLnRleHRwYXR0ZXJuLmNvbS92aWV3dG9waWMucGhwP2lkPTM4MDE1Ij5t
cmRfY29kZU1pcnJvcjwvYT4gd2hpY2gsIGluIHR1cm4sIHdhcyBwcm9tcHRlZCBieSBteSA8
YSBocmVmPSJodHRwOi8vZm9ydW0udGV4dHBhdHRlcm4uY29tL3ZpZXd0b3BpYy5waHA/aWQ9
Mzc5NTciPkNvZGVNaXJyb3IgYWRtaW4gdGhlbWU8L2E+LCBhbmQgPGEgaHJlZj0iaHR0cDov
L2NvZGVtaXJyb3IubmV0Ij5Db2RlTWlycm9yPC9hPi48L3A+Cgo8aDM+RGVzY3JpcHRpb248
L2gzPgo8cD5JdCB1c2VzIDxhIGhyZWY9Imh0dHA6Ly9jb2RlbWlycm9yLm5ldCI+Q29kZU1p
cnJvcjwvYT4gdG8gc3ludGF4LWhpZ2hsaWdodCBjb2RlIHRleHRhcmVhcyBpbiBUZXh0cGF0
dGVybidzIEZvcm1zLCBQYWdlcyBhbmQgU3R5bGUgdGFicyAtIHBsdXMgSmF2YVNjcmlwdCAo
PGEgaHJlZj0iaHR0cDovL2ZvcnVtLnRleHRwYXR0ZXJuLmNvbS92aWV3dG9waWMucGhwP2lk
PTM3ODQ5Ij5zcGZfanM8L2E+IHJlcXVpcmVkKSBhbmQgZXh0ZXJuYWwgZmlsZXMgKDxhIGhy
ZWY9Imh0dHA6Ly9mb3J1bS50ZXh0cGF0dGVybi5jb20vdmlld3RvcGljLnBocD9pZD0zODAz
MiI+c3BmX2V4dDwvYT4gcmVxdWlyZWQpLjwvcD4KCjxoMz5JbnN0YWxsYXRpb248L2gzPgo8
cD48YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vc3BpZmZpbi9zcGZfY29kZW1pcnJvci96
aXBiYWxsL21hc3RlciI+RE9XTkxPQUQ8L2E+IHRoZSB6aXAgZmlsZSwgdW56aXAsIHVwbG9h
ZCB0aGUgY29udGFpbmluZyAnY29kZW1pcnJvcicgZGlyZWN0b3J5IHRvIHlvdXIgd2ViIHJv
b3Q6PC9wPgoKPHVsPgoJCTxsaT55b3Vyc2l0ZS5jb20KCTx1bD4KCQk8bGk+Y29kZW1pcnJv
cgoJPHVsPgoJCTxsaT5jbV9jb21iaW5lZF9taW4uY3NzPC9saT4KCQk8bGk+Y21fY3NzX21p
bi5qczwvbGk+CgkJPGxpPmNtX2h0bWxtaXhlZF9taW4uanM8L2xpPgoJCTxsaT5jbV9qYXZh
c2NyaXB0X21pbi5qczwvbGk+CgkJPGxpPmNtX3BocF9taW4uanM8L2xpPgoJCTxsaT5jbV90
aGVtZV9zZWxlY3RfbWluLmpzPC9saT4KCTwvdWw+PC9saT4KCQk8bGk+dGV4dHBhdHRlcm48
L2xpPgoJCTxsaT5ldGMmIzgyMzA7PC9saT4KCTwvdWw+PC9saT4KPC91bD4KPHA+SW5zdGFs
bCBhbmQgYWN0aXZhdGUgdGhlIHBsdWdpbiAoKS48L3A+Cgo8aDM+SGlzdG9yeTwvaDM+Cjxw
Pk1heSAyMDEyIC0gdmVyc2lvbiAwLjE8L3A+IjtzOjQ6ImNvZGUiO3M6Mzc1MToiaWYgKEB0
eHBpbnRlcmZhY2UgPT0gJ2FkbWluJykgewogICAgcmVnaXN0ZXJfY2FsbGJhY2soJ3NwZl90
ZXh0YXJlYV9wYWdlJywgJ3BhZ2UnKTsKICAgIHJlZ2lzdGVyX2NhbGxiYWNrKCdzcGZfdGV4
dGFyZWFfZm9ybScsICdmb3JtJyk7CiAgICByZWdpc3Rlcl9jYWxsYmFjaygnc3BmX3RleHRh
cmVhX2NzcycsICdjc3MnKTsKICAgIHJlZ2lzdGVyX2NhbGxiYWNrKCdzcGZfdGV4dGFyZWFf
anMnLCAnc3BmX2pzJyk7CiAgICByZWdpc3Rlcl9jYWxsYmFjaygnc3BmX3RleHRhcmVhX2V4
dCcsICdzcGZfZXh0Jyk7Cn0KCmZ1bmN0aW9uIHNwZl90ZXh0YXJlYV9wYWdlKCRldmVudCwg
JHN0ZXApIHsKc3BmX2NvZGVtaXJyb3JfdGhlbWVfc2VsZWN0KCk7CnNwZl90ZXh0YXJlYV9j
b21tb24oKTsKJGpzID0gJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9j
b2RlbWlycm9yL2NtX2h0bWxtaXhlZF9taW4uanMiPjwvc2NyaXB0Pic7CiRqcyAuPSAnPHNj
cmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPic7CgokanMgLj0gPDw8RU9GCnZhciBlZGl0
b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgi
aHRtbCIpLCB7CiAgICBtb2RlOiAidGV4dC9odG1sIiwKICAgIHRhYk1vZGU6ICJpbmRlbnQi
LAogICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgbGluZU51bWJlcnM6IHRydWUsCiAgICBl
eHRyYUtleXM6IHsKICAgICInPiciOiBmdW5jdGlvbihjbSkgeyBjbS5jbG9zZVRhZyhjbSwg
Jz4nKTsgfSwKICAgICInLyciOiBmdW5jdGlvbihjbSkgeyBjbS5jbG9zZVRhZyhjbSwgJy8n
KTsgfQogICAgfSwKICAgIHRoZW1lOiAiYW1iaWFuY2UiCn0pOwpFT0Y7CgokanMgLj0gJzwv
c2NyaXB0Pic7CgplY2hvICRqczsKfQoKZnVuY3Rpb24gc3BmX3RleHRhcmVhX2Zvcm0oJGV2
ZW50LCAkc3RlcCkgewpzcGZfY29kZW1pcnJvcl90aGVtZV9zZWxlY3QoKTsKc3BmX3RleHRh
cmVhX2NvbW1vbigpOwokanMgPSAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNy
Yz0iL2NvZGVtaXJyb3IvY21faHRtbG1peGVkX21pbi5qcyI+PC9zY3JpcHQ+JzsKJGpzIC49
ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+JzsKCiRqcyAuPSA8PDxFT0YKdmFy
IGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRC
eUlkKCJmb3JtIiksIHsKICAgIG1vZGU6ICJ0ZXh0L2h0bWwiLAogICAgdGFiTW9kZTogImlu
ZGVudCIsCiAgICBsaW5lV3JhcHBpbmc6IHRydWUsCiAgICBsaW5lTnVtYmVyczogdHJ1ZSwK
ICAgIGV4dHJhS2V5czogewogICAgIic+JyI6IGZ1bmN0aW9uKGNtKSB7IGNtLmNsb3NlVGFn
KGNtLCAnPicpOyB9LAogICAgIicvJyI6IGZ1bmN0aW9uKGNtKSB7IGNtLmNsb3NlVGFnKGNt
LCAnLycpOyB9CiAgICB9LAogICAgdGhlbWU6ICJhbWJpYW5jZSIKfSk7CkVPRjsKCiRqcyAu
PSAnPC9zY3JpcHQ+JzsKCmVjaG8gJGpzOwp9CgpmdW5jdGlvbiBzcGZfdGV4dGFyZWFfY3Nz
KCRldmVudCwgJHN0ZXApIHsKc3BmX2NvZGVtaXJyb3JfdGhlbWVfc2VsZWN0KCk7CnNwZl90
ZXh0YXJlYV9jb21tb24oKTsKJGpzID0gJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0
IiBzcmM9Ii9jb2RlbWlycm9yL2NtX2Nzc19taW4uanMiPjwvc2NyaXB0Pic7CiRqcyAuPSAn
PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPic7CgokanMgLj0gPDw8RU9GCnZhciBl
ZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYShkb2N1bWVudC5nZXRFbGVtZW50QnlJ
ZCgiY3NzIiksIHsKICAgIGxpbmVXcmFwcGluZzogdHJ1ZSwKICAgIGxpbmVOdW1iZXJzIDog
dHJ1ZSwKICAgIG1hdGNoQnJhY2tldHMgOiB0cnVlLAogICAgdGhlbWU6ICJhbWJpYW5jZSIK
fSk7CkVPRjsKCiRqcyAuPSAnPC9zY3JpcHQ+JzsKCmVjaG8gJGpzOwp9CgpmdW5jdGlvbiBz
cGZfdGV4dGFyZWFfanMoJGV2ZW50LCAkc3RlcCkgewpzcGZfY29kZW1pcnJvcl90aGVtZV9z
ZWxlY3QoKTsKc3BmX3RleHRhcmVhX2NvbW1vbigpOwokanMgPSAnPHNjcmlwdCB0eXBlPSJ0
ZXh0L2phdmFzY3JpcHQiIHNyYz0iL2NvZGVtaXJyb3IvY21famF2YXNjcmlwdF9taW4uanMi
Pjwvc2NyaXB0Pic7CiRqcyAuPSAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPic7
CgokanMgLj0gPDw8RU9GCnZhciBlZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYShk
b2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3BmX2pzIiksIHsKICAgIGxpbmVXcmFwcGluZzog
dHJ1ZSwKICAgIGxpbmVOdW1iZXJzOiB0cnVlLAogICAgbWF0Y2hCcmFja2V0czogdHJ1ZSwK
ICAgIHRoZW1lOiAiYW1iaWFuY2UiCn0pOwpFT0Y7CgokanMgLj0gJzwvc2NyaXB0Pic7Cgpl
Y2hvICRqczsKfQoKZnVuY3Rpb24gc3BmX3RleHRhcmVhX2V4dCgkZXZlbnQsICRzdGVwKSB7
CnNwZl9jb2RlbWlycm9yX3RoZW1lX3NlbGVjdCgpOwpzcGZfdGV4dGFyZWFfY29tbW9uKCk7
CiRqcyA9ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvY29kZW1pcnJv
ci9jbV9waHBfbWluLmpzIj48L3NjcmlwdD4nOwokanMgLj0gJzxzY3JpcHQgdHlwZT0idGV4
dC9qYXZhc2NyaXB0Ij4nOwoKJGpzIC49IDw8PEVPRgp2YXIgZWRpdG9yID0gQ29kZU1pcnJv
ci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwZl9leHQiKSwgewog
ICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgbGluZU51bWJlcnM6IHRydWUsCiAgICBtYXRj
aEJyYWNrZXRzOiB0cnVlLAogICAgbW9kZTogImFwcGxpY2F0aW9uL3gtaHR0cGQtcGhwIiwK
ICAgIGluZGVudFVuaXQ6IDQsCiAgICBpbmRlbnRXaXRoVGFiczogdHJ1ZSwKICAgIGVudGVy
TW9kZTogImtlZXAiLAogICAgdGFiTW9kZTogInNoaWZ0IiwKICAgIHRoZW1lOiAiYW1iaWFu
Y2UiCn0pOwpFT0Y7CgokanMgLj0gJzwvc2NyaXB0Pic7CgplY2hvICRqczsKfQoKZnVuY3Rp
b24gc3BmX3RleHRhcmVhX2NvbW1vbigpIHsKJGNtID0gJzxsaW5rIGhyZWY9Ii9jb2RlbWly
cm9yL2NtX2NvbWJpbmVkX21pbi5jc3MiIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9j
c3MiIC8+CiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvY29kZW1p
cnJvci9jbV90aGVtZV9zZWxlY3RfbWluLmpzIj48L3NjcmlwdD4nOwoKZWNobyAkY207Cn0K
CmZ1bmN0aW9uIHNwZl9jb2RlbWlycm9yX3RoZW1lX3NlbGVjdCgpIHsKJHNlbGVjdCA9ICc8
cCBzdHlsZT0icG9zaXRpb246Zml4ZWQ7cmlnaHQ6MjBweDtib3R0b206MjBweCI+Q29kZU1p
cnJvciB0aGVtZTogPHNlbGVjdCBvbmNoYW5nZT0ic2VsZWN0VGhlbWUoKSIgaWQ9InNlbGVj
dCI+CiAgICA8b3B0aW9uPmRlZmF1bHQ8L29wdGlvbj4KICAgIDxvcHRpb24gc2VsZWN0ZWQ+
YW1iaWFuY2U8L29wdGlvbj4KICAgIDxvcHRpb24+YmxhY2tib2FyZDwvb3B0aW9uPgogICAg
PG9wdGlvbj5jb2JhbHQ8L29wdGlvbj4KICAgIDxvcHRpb24+ZWNsaXBzZTwvb3B0aW9uPgog
ICAgPG9wdGlvbj5lbGVnYW50PC9vcHRpb24+CiAgICA8b3B0aW9uPmxlc3Nlci1kYXJrPC9v
cHRpb24+CiAgICA8b3B0aW9uPm1vbm9rYWk8L29wdGlvbj4KICAgIDxvcHRpb24+bmVhdDwv
b3B0aW9uPgogICAgPG9wdGlvbj5uaWdodDwvb3B0aW9uPgogICAgPG9wdGlvbj5ydWJ5Ymx1
ZTwvb3B0aW9uPgogICAgPG9wdGlvbj54cS1kYXJrPC9vcHRpb24+Cjwvc2VsZWN0Pgo8L3A+
JzsKCmVjaG8gJHNlbGVjdDsKfSI7czozOiJtZDUiO3M6MzI6IjdiMGVhM2M3YjczZjA5Y2Iw
MGY0M2NkZDE1MmJjMzA2Ijt9
